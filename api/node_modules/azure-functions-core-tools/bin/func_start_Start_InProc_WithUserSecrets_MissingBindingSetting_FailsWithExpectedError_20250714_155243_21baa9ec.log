=== Test started at 7/14/2025 3:52:43 PM ===
Test Name: Start_InProc_WithUserSecrets_MissingBindingSetting_FailsWithExpectedError
Command: func start --port 49828 --verbose
Working Directory: C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee
====================================
[HANDLER] Starting process started handler helper
[HANDLER] Process working directory: C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee
[HOST STATUS] Starting to wait for function host on http://localhost:49828 at 7/14/2025 3:52:43 PM
[HOST STATUS] PID of process: 2244
[HOST STATUS] Retry number: 1
[STDOUT]   Determining projects to restore...
[STDOUT]   All projects are up-to-date for restore.
[STDOUT]   re33is11_iee -> C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\bin\output\re33is11_iee.dll
[STDOUT] C:\Users\cloudtest\.nuget\packages\microsoft.net.sdk.functions\4.6.0\build\Microsoft.NET.Sdk.Functions.Build.targets(32,5): warning : Function [queue1]: Missing value for AzureWebJobsStorage in local.settings.json. This is required for all triggers other than httptrigger, kafkatrigger, orchestrationTrigger, activityTrigger, entityTrigger. [C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj]
[STDOUT] C:\Users\cloudtest\.nuget\packages\microsoft.net.sdk.functions\4.6.0\build\Microsoft.NET.Sdk.Functions.Build.targets(32,5): warning : Function [queue1]: cannot find value named 'ConnectionStrings:MyQueueConn' in local.settings.json that matches 'connection' property set on 'queueTrigger' [C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj]
[STDOUT] C:\Users\cloudtest\.nuget\packages\microsoft.net.sdk.functions\4.6.0\build\Microsoft.NET.Sdk.Functions.Build.targets(32,5): warning :  [C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj]
[STDOUT] 
[STDOUT] Build succeeded.
[STDOUT] 
[STDOUT] C:\Users\cloudtest\.nuget\packages\microsoft.net.sdk.functions\4.6.0\build\Microsoft.NET.Sdk.Functions.Build.targets(32,5): warning : Function [queue1]: Missing value for AzureWebJobsStorage in local.settings.json. This is required for all triggers other than httptrigger, kafkatrigger, orchestrationTrigger, activityTrigger, entityTrigger. [C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj]
[STDOUT] C:\Users\cloudtest\.nuget\packages\microsoft.net.sdk.functions\4.6.0\build\Microsoft.NET.Sdk.Functions.Build.targets(32,5): warning : Function [queue1]: cannot find value named 'ConnectionStrings:MyQueueConn' in local.settings.json that matches 'connection' property set on 'queueTrigger' [C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj]
[STDOUT] C:\Users\cloudtest\.nuget\packages\microsoft.net.sdk.functions\4.6.0\build\Microsoft.NET.Sdk.Functions.Build.targets(32,5): warning :  [C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj]
[STDOUT]     1 Warning(s)
[STDOUT]     0 Error(s)
[STDOUT] 
[STDOUT] Time Elapsed 00:00:02.35
[STDOUT] 
[STDOUT] Workload updates are available. Run `dotnet workload list` for more information.
[STDOUT] 
[STDERR] 
[STDOUT] FUNCTIONS_INPROC_NET8_ENABLED app setting is not enabled in local.settings.json
[STDOUT] Selected inproc6 host.
[STDOUT] .NET 6 is no longer supported. Please consider migrating to a supported version. For more information, see https://aka.ms/azure-functions/dotnet/net8-in-process. If you intend to target .NET 8 on the in-process model, make sure that 'FUNCTIONS_INPROC_NET8_ENABLED' is set to '1' in local.settings.json.
[STDOUT] 
[STDOUT] Starting child process for inproc6 model host.
[STDOUT] D:\a\_work\1\staging\func-cli\Azure.Functions.Cli.win-x64.4.1.0\in-proc6\func.exe present 
[STDOUT] Started child process with ID: 3824
[STDOUT]                   %%%%%%
[STDOUT]                  %%%%%%
[STDOUT]             @   %%%%%%    @
[STDOUT]           @@   %%%%%%      @@
[STDOUT]        @@@    %%%%%%%%%%%    @@@
[STDOUT]      @@      %%%%%%%%%%        @@
[STDOUT]        @@         %%%%       @@
[STDOUT]          @@      %%%       @@
[STDOUT]            @@    %%      @@
[STDOUT]                 %%
[STDOUT]                 %
[STDOUT] Azure Functions Core Tools
[STDOUT] Core Tools Version:       4.1.0+9a53409b640bbb39ef49467f000f46c5d81d4bbf (64-bit)
[STDOUT] Function Runtime Version: 4.40.100.25262
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[STDOUT] [2025-07-14T15:52:47.225Z] Found C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\re33is11_iee.csproj. Using for user secrets file configuration.
[STDOUT] Warning: Cannot find value named 'ConnectionStrings:MyQueueConn' in local.settings.json that matches 'connection' property set on 'queueTrigger' in 'C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\bin\output\queue1\function.json'. You can run 'func azure functionapp fetch-app-settings <functionAppName>' or specify a connection string in local.settings.json.
[STDOUT] [2025-07-14T15:52:47.575Z] Building host: version spec: , startup suppressed: 'False', configuration suppressed: 'False', startup operation id: '5099f21f-fabe-4801-917e-c63bce71f00c'
[STDOUT] [2025-07-14T15:52:47.581Z] Reading host configuration file 'C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\bin\output\host.json'
[STDOUT] [2025-07-14T15:52:47.581Z] Host configuration file read:
[STDOUT] [2025-07-14T15:52:47.581Z] {
[STDOUT] [2025-07-14T15:52:47.581Z]   "version": "2.0",
[STDOUT] [2025-07-14T15:52:47.581Z]   "logging": {
[STDOUT] [2025-07-14T15:52:47.581Z]     "applicationInsights": {
[STDOUT] [2025-07-14T15:52:47.581Z]       "samplingSettings": {
[STDOUT] [2025-07-14T15:52:47.581Z]         "isEnabled": true,
[STDOUT] [2025-07-14T15:52:47.581Z]         "excludedTypes": "Request"
[STDOUT] [2025-07-14T15:52:47.581Z]       },
[STDOUT] [2025-07-14T15:52:47.581Z]       "enableLiveMetricsFilters": true
[STDOUT] [2025-07-14T15:52:47.582Z]     }
[STDOUT] [2025-07-14T15:52:47.582Z]   }
[STDOUT] [2025-07-14T15:52:47.582Z] }
[STDOUT] [2025-07-14T15:52:47.597Z] Extension Bundle not loaded. Loading extensions from C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\bin\output\bin. BundleConfigured: False, PrecompiledFunctionApp: False, LegacyBundle: False, DotnetIsolatedApp: False, isLogicApp: False
[STDOUT] [2025-07-14T15:52:47.597Z] Script Startup resetting load context with base path: 'C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\bin\output\bin'.
[STDOUT] [2025-07-14T15:52:47.601Z] Loading startup extension 'AzureStorageBlobs'
[STDOUT] [2025-07-14T15:52:47.651Z] Loaded extension 'AzureStorageBlobs' (5.3.4.0)
[STDOUT] [2025-07-14T15:52:47.661Z] Loading startup extension 'AzureStorageQueues'
[STDOUT] [2025-07-14T15:52:47.662Z] Loaded extension 'AzureStorageQueues' (5.3.4.0)
[STDOUT] [2025-07-14T15:52:47.666Z] Reading host configuration file 'C:\Users\cloudtest\AppData\Local\Temp\re33is11.iee\bin\output\host.json'
[STDOUT] [2025-07-14T15:52:47.666Z] Host configuration file read:
[STDOUT] [2025-07-14T15:52:47.666Z] {
[STDOUT] [2025-07-14T15:52:47.666Z]   "version": "2.0",
[STDOUT] [2025-07-14T15:52:47.666Z]   "logging": {
[STDOUT] [2025-07-14T15:52:47.666Z]     "applicationInsights": {
[STDOUT] [2025-07-14T15:52:47.666Z]       "samplingSettings": {
[STDOUT] [2025-07-14T15:52:47.666Z]         "isEnabled": true,
[STDOUT] [2025-07-14T15:52:47.666Z]         "excludedTypes": "Request"
[STDOUT] [2025-07-14T15:52:47.666Z]       },
[STDOUT] [2025-07-14T15:52:47.666Z]       "enableLiveMetricsFilters": true
[STDOUT] [2025-07-14T15:52:47.666Z]     }
[STDOUT] [2025-07-14T15:52:47.666Z]   }
[STDOUT] [2025-07-14T15:52:47.666Z] }
[STDOUT] [2025-07-14T15:52:48.168Z] Initializing Warmup Extension.
[STDOUT] [2025-07-14T15:52:48.179Z] Resolved secret storage provider BlobStorageSecretsRepository
[HOST STATUS] Retry number: 2
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 3
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 4
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 5
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 6
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 7
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 8
[STDOUT] [2025-07-14T15:53:26.344Z] There was an error performing a read operation on the Blob Storage Secret Repository.
[STDOUT] [2025-07-14T15:53:26.344Z] Azure.Core: No connection could be made because the target machine actively refused it. (127.0.0.1:10000). System.Net.Http: No connection could be made because the target machine actively refused it. (127.0.0.1:10000). System.Net.Sockets: No connection could be made because the target machine actively refused it.
[STDOUT] [2025-07-14T15:53:26.381Z] A host error has occurred during startup operation '5099f21f-fabe-4801-917e-c63bce71f00c'.
[STDOUT] [2025-07-14T15:53:26.381Z] Azure.Core: No connection could be made because the target machine actively refused it. (127.0.0.1:10000). System.Net.Http: No connection could be made because the target machine actively refused it. (127.0.0.1:10000). System.Net.Sockets: No connection could be made because the target machine actively refused it.
[STDOUT] [2025-07-14T15:53:26.388Z] Initializing Warmup Extension.
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 9
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 10
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 11
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 12
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 13
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 14
[STDOUT] [2025-07-14T15:54:02.557Z] There was an error performing a read operation on the Blob Storage Secret Repository.
[STDOUT] [2025-07-14T15:54:02.557Z] Azure.Core: No connection could be made because the target machine actively refused it. (127.0.0.1:10000). System.Net.Http: No connection could be made because the target machine actively refused it. (127.0.0.1:10000). System.Net.Sockets: No connection could be made because the target machine actively refused it.
[STDOUT] Value cannot be null. (Parameter 'provider')
[STDOUT] [2025-07-14T15:54:02.573Z] Host startup operation has been canceled
[STDOUT] [2025-07-14T15:54:02.573Z] Initialization cancellation requested by runtime.
[STDOUT] [2025-07-14T15:54:02.576Z] Stopping host...
[STDOUT] [2025-07-14T15:54:02.576Z] Host shutdown completed.
[HOST STATUS] Error checking host status: No connection could be made because the target machine actively refused it. (localhost:49828)
[HOST STATUS] Retry number: 15
[HOST STATUS] Function host process exited with code 0 - cannot continue waiting
[HANDLER] Host has started
[HANDLER] Going to kill process
[HANDLER] Returning captured content
[STDOUT] Process started handler completed successfully for process 2244.
====================================
Command exited with code: 0
=== Test ended at 7/14/2025 3:54:08 PM ===
